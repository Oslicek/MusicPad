<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MusicPad"
             x:Class="MusicPad.MainPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource BackgroundMain}">

    <Grid x:Name="MainGrid" Padding="8">
        <!-- Layout will be configured dynamically in code-behind -->
        
        <!-- Hamburger Menu Button and Commit Label - top right corner, high ZIndex to stay on top -->
        <StackLayout x:Name="HamburgerStack"
                     VerticalOptions="Start"
                     HorizontalOptions="End"
                     Spacing="2"
                     Margin="4,0"
                     ZIndex="100">
            <Border x:Name="HamburgerButton"
                    StrokeShape="RoundRectangle 6"
                    Padding="8,6"
                    HorizontalOptions="End">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHamburgerMenuClicked" />
                </Border.GestureRecognizers>
                <Label x:Name="HamburgerIcon"
                       Text="â˜°"
                       FontSize="20"
                       HorizontalOptions="Center"
                       VerticalOptions="Center" />
            </Border>
            <Label x:Name="CommitHashLabel"
                   Text="{x:Static local:BuildInfo.CommitHash}"
                   FontSize="8"
                   TextColor="{StaticResource TextCommit}"
                   HorizontalOptions="End" />
        </StackLayout>
        
        <!-- Controls container (pickers stacked vertically) -->
        <StackLayout x:Name="ControlsStack"
                     Spacing="4"
                     VerticalOptions="Start"
                     HorizontalOptions="Start">
            
            <Picker x:Name="InstrumentPicker"
                    Title="Instrument"
                    TitleColor="{StaticResource TextSecondary}"
                    TextColor="{StaticResource White}"
                    BackgroundColor="{StaticResource BackgroundPicker}"
                    WidthRequest="150"
                    SelectedIndexChanged="OnInstrumentChanged" />
            
            <Picker x:Name="PadreaPicker"
                    Title="Padrea"
                    TitleColor="{StaticResource TextSecondary}"
                    TextColor="{StaticResource White}"
                    BackgroundColor="{StaticResource BackgroundPicker}"
                    WidthRequest="150"
                    SelectedIndexChanged="OnPadreaChanged" />

            <Picker x:Name="ScalePicker"
                    Title="Scale"
                    TitleColor="{StaticResource TextSecondary}"
                    TextColor="{StaticResource White}"
                    BackgroundColor="{StaticResource BackgroundPicker}"
                    WidthRequest="150"
                    IsVisible="False"
                    SelectedIndexChanged="OnScaleChanged" />
        </StackLayout>
        
        <!-- Volume Knob - positioned dynamically -->
        <GraphicsView x:Name="VolumeKnob"
                      HeightRequest="120"
                      WidthRequest="120" />
        
        <!-- Effect Area - positioned dynamically -->
        <GraphicsView x:Name="EffectArea" />
        
        <!-- Pad Container - positioned dynamically -->
        <Grid x:Name="PadContainer">
            <Label x:Name="LoadingLabel"
                   Text="Loading..."
                   FontSize="18"
                   TextColor="{StaticResource TextDim}"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />
        </Grid>
        
        <!-- Navigation Bar (Mute + arrows + page dots) - positioned dynamically, rendered above PadContainer -->
        <GraphicsView x:Name="NavigationBar"
                      HeightRequest="50"
                      HorizontalOptions="Center"
                      VerticalOptions="End" />
        
        <!-- Recording Area - positioned dynamically above navigation bar, rendered on top -->
        <GraphicsView x:Name="RecArea"
                      HeightRequest="44"
                      HorizontalOptions="Center"
                      VerticalOptions="End" />
        
    </Grid>

</ContentPage>
